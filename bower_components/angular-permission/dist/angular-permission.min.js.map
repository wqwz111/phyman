{"version":3,"sources":["angular-permission.js"],"names":["permission","angular","module","config","$stateProvider","decorator","state","parentFn","self","getState","run","$rootScope","$state","$q","Authorization","PermissionMap","$on","event","toState","toParams","fromState","fromParams","options","areSetStatePermissions","isDefined","data","permissions","setStateAuthorizationStatus","status","extend","$$isAuthorizationFinished","isAuthorizationFinished","areStateEventsDefaultPrevented","isStateChangePermissionStartDefaultPrevented","isStateChangeStartDefaultPrevented","compensatePermissionMap","statePermissionMap","permissionMap","redirectTo","toStatePath","get","name","path","slice","reverse","forEach","extendPermissionMap","authorizeForState","authorize","then","$broadcast","go","notify","rejectedPermission","resolveRedirectState","redirectStateName","defaultPrevented","preventDefault","compensatedPermissionMap","factory","this","only","resolvePermissionMapProperty","except","resolveFunctionRedirect","redirectFunction","when","call","redirectState","isString","TypeError","resolveObjectRedirect","redirectObject","ReferenceError","isFunction","resolve","property","isArray","prototype","concat","rejectedPermissionName","isObject","reject","Permission","permissionName","validationFunction","validateConstructor","wrapInPromise","result","dfd","defer","promise","validatePermission","validationResult","PermissionStore","Role","roleName","permissionNames","defineManyPermissions","length","validateRole","promises","map","hasPermissionDefinition","getPermissionDefinition","all","service","definePermission","permissionStore","removePermissionDefinition","getStore","clearStore","defineRole","roleStore","removeRoleDefinition","hasRoleDefinition","getRoleDefinition","directive","$log","restrict","scope","bindToController","controllerAs","controller","$scope","$element","$watchGroup","removeClass","addClass","e","error","message","RoleStore","permissionsMap","handleAuthorization","deferred","exceptPromises","findMatchingPermissions","rejectedPermissions","onlyPromises","resolvedPermissions","counter","results","key","value","hasOwnProperty","reason","role"],"mappings":"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","file":"angular-permission.min.js"}